# 拡張設定

## 輪郭線設定

|名前|説明|
|-|-|
|テクスチャ|テクスチャを指定します。右のカラーピッカーで色を決めることもできます。|
|色相|色合いです。|
|彩度|色の鮮やかさです。|
|明度|色の明るさです。|
|ガンマ|コントラストを強調します。|
|焼き込み|色調補正したテクスチャを書き出します。|
|ライティングを適用|ライティングによる明るさの変化を適用します。|
|マスクと太さ|輪郭線の太さです。マスクを指定すると黒く塗った部分に輪郭線が出なくなります。|
|太さを補正|距離による太さの変化を補正します。|
|Vertex R -> Width|頂点カラーのR値を太さに適用します。|
|ノーマルマップ|ノーマルマップを指定することで輪郭線を押し出す方向を調整できます。|

## 視差マップ

|名前|説明|
|-|-|
|視差マップ|視差マップとその強度です。|
|オフセット|視差マップの基準となる値です。|

## 距離フェード

|名前|説明|
|-|-|
|色|フェード後の色です。|
|開始距離|フェードを開始する距離です。|
|終了距離|フェードを終了する距離です。|
|強度|フェードの強さです。|

## AudioLink

|名前|説明|
|-|-|
|UV Mode|オーディオエフェクトをサンプリングする際に使うUVの種類です。|
|サイズ|UVに応じたタイミングのずらし量です。|
|Offset|タイミングのずらし量です。|
|角度|UVの角度です。|
|帯域|サンプリングする帯域(音の高さ)です。|
|マスク|AudioLinkの処理を変更するマスクテクスチャです。<br>通常時: RGB=遅延/帯域/強度<br>Spectrum: RGB=音量/帯域/強度|
|-|-|
|AudioLink無効時の初期値|AudioLink非対応のワールドでの挙動を設定します。|
|適用先|エフェクトを適用する対象です。|
|ローカル化|AudioLinkからテクスチャを取得せずにローカルのテクスチャを使用します。|
|ローカルマップ|ローカルのテクスチャです。|
|BPM|曲のテンポです。|
|拍数|BPMに掛け合わせる数値です。|
|Offset|タイミングのずらし量です。|

## Dissolve

|名前|説明|
|-|-|
|Dissolve|エフェクトの種類です。|
|形状|エフェクトの形です。|
|範囲|エフェクトの範囲です。|
|ぼかし|エフェクトのぼかし量です。|
|マスク|(透明度モード) エフェクトで使用するマスクテクスチャです。|
|座標|(UV・座標モード) エフェクトの開始位置です。|
|向き|(UV・座標モード) エフェクトの動く方向です。|
|ノイズ|エフェクトにディテールを追加するマスクテクスチャです。|
|色|エフェクトの色です。|

## 暗号化
[AvaterEncryption](https://github.com/lilxyzw/AvaterEncryption)を用いて4つのキーによってメッシュを復号化します。  
リッピング防止に使用できますが、完全に防げるわけではありません。

|Name|Description|
|-|-|
|Ignore Encryption|メッシュを暗号化したくない場合はこれをオンにしてください。|
|Keys|復号化のキーです。|

## ステンシル設定
複雑で理解が困難な場合、以下のように理解すると問題なく使えます。

    例: 眉毛を髪の上から描画したい場合
    眉毛のマテリアルでSet Writer、髪のマテリアルでSet Readerを押す
    眉毛と髪のRefの数値を合わせる

|名前|説明|
|-|-|
|Ref|ステンシル処理に使われるIDです。IDを元に描画する・しないを決定します。|
|ReadMask|比較前のRefの値に対するマスク処理です。|
|WriteMask|書き込む値に対するマスク処理です。|
|Comp|IDの比較の方法です。この条件を満たすときに描画されます。|
|Pass|描画するときにIDを書き換えるかどうかの設定です。|
|Fail|描画されないときにIDを書き換えるかどうかの設定です。|
|ZFail|手前にものがあって描画されないが、`Comp`の条件を満たす場合にIDを書き換えるかどうかの設定。|
|Set Writer|ステンシルを書き込む側の設定にします。|
|Set Reader|ステンシルを読み込む側の設定にします。|
|Reset|ステンシルの設定を初期化し、ステンシルを行わない状態に戻します。|

## レンダリング設定
通常は変更しない複雑な設定項目です。無視して問題ありません。

|名前|説明|
|-|-|
|シェーダーの種類|通常版と軽量版を選択できます。|
|Cull Mode (描画面)|指定した面のみ描画します。|
|ZWrite|奥行き情報を書き込むかどうか。数値は奥ほど大きく、手前ほど小さくなります。|
|ZTest|奥行き情報の比較方法です。この条件を満たすときに描画されます。|
|Offset Factor|画面座標に基づいて奥行き情報を増減させます。|
|Offset Units|奥行き情報を増減させます。|
|SrcBlend|シェーダーで計算された色に乗算する数値。|
|DstBlend|すでに画面にある色に乗算する数値。|
|BlendOp|数値の合成方法。`Add`以外にすると`SrcBlend`と`DstBlend`は無視されます。|
|ForwardAdd*|追加のライトの合成時のみ使われる上記3つの設定です。|
|Enable GPU Instancing|GPU Instancingを行うかどうか。|
|Render Queue|マテリアルを描画する順序を決める際に使われる数値です。大きいほど後に描画されます。|

## テッセレーション
近づいた際にモデルをなめらかにする実験的な機能です。ハイポリのモデルでは負荷が非常に高くなるので、ローポリのモデルをなめらかに見せたい場合などに限って使うと良いでしょう。

|名前|説明|
|-|-|
|閾値|この数値以上に辺が長くなったらポリゴンを分割します。|
|強度|なめらかにする処理の強さです。|
|縮小補正|縮小する量です。なめらかにする際にモデルが大きく見えるようになるため、それを補うためのものです。|
|最大分割数|辺の最大分割数です。数値が大きいほど細かく分割されるため、負荷がかかりやすくなります。|

## 屈折設定

|名前|説明|
|-|-|
|強度|奥にあるものを歪ませる強さです。|
|フレネル|角度に応じた歪みやすさです。|
|メインカラーから色を取得|メインカラーを屈折の色に適用します。|
|色|屈折の色です。|

## ファー設定

|名前|説明|
|-|-|
|ノーマルマップ|ここで指定したノーマルマップをファーの向きとして利用できます。|
|向き|ファーの向きです。|
|長さ|ファーの長さです。|
|VertexColor -> Vector|頂点カラーをファーの向きとして利用します。|
|重力|重力によってファーが下を向く強さです。|
|ランダム化|ファーの方向をランダムにする度合いです。|
|ノイズ|ファーの生成に使われるノイズテクスチャです。|
|Tiling|ノイズの細かさ、つまり毛の細かさです。|
|Offset|ノイズテクスチャのずらし量です。|
|マスク|マスクを指定すると黒く塗った部分でファーが無効化されます。|
|陰影|ファーに陰影を適用する度合いです。|
|レイヤー数|ファーを生成する量です。数値を上げるほど密度が高くなりますが、負荷も高くなります。|
|根本の太さ|根本を太くして密度を上げたり本体部分を見えにくくしたりできます。|
|接触強度|頂点ライトを用いた接触機能による変形の強度です。|

接触機能に用いるPoint Lightは以下のように設定することで機能します。  
Unityの制限で接触できるライトの数は最大4つまでになります。  
Prefabsフォルダに設定済みのPrefabを同梱しています。

|名前|説明|
|-|-|
|Range|下３桁・４桁目が2（x.xx22の形）|
|Color|RGBA = (0.0, 0.0, 0.0, 1.0)|
|Mode|Realtime|
|Intensity|1|
|Render Mode|Not Important|